<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Pokemon Table</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">

	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">

	<!-- Bootstrap JS Modal functionality -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
		crossorigin="anonymous"></script>
	<style>
		.custom-card {
			transition: transform 0.2s ease-in-out;
			/* Smooth transition */
		}

		.custom-card:hover {
			transform: scale(1.05);
			/* Increase size on hover */
			box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
			/* Add a shadow for better effect */
		}
	</style>
</head>

<body>

	<main class="container py-4">

		<!-- Dashboard Cards -->
		<div class="row text-center">
			<div class="col-md-4">
				<div class="card shadow-sm border-primary custom-card">
					<h6 class="card-title text-uppercase bg-primary text-warning p-2 p fw-bold rounded-top">
						<i class="fa-solid fa-layer-group"></i> <span>
							No. of Pokemons
						</span>
					</h6>
					<div class="card-body">
						<img src="/pokedex.png" alt="Pokedex Image" style="max-height: 150px; opacity: 0.7;">

						<h2 class="text-warning fw-bold text-shadow" th:text="${totalPokemons}"></h2>
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="card shadow-sm border-primary custom-card">
					<h6 class="card-title text-uppercase bg-primary text-warning p-2 p fw-bold rounded-top">
						<i class="fa-solid fa-skull-crossbones"></i> Strongest Pokemon
					</h6>
					<div class="card-body">
						<img th:if="${strongestPokemonPicture != null}" th:src="@{'/uploads/' + ${strongestPokemonPicture}}" alt="Pokemon Image"  style="max-height: 150px;">
						<h2 class="text-warning fw-bold me-1" th:text="${strongestPokemonName}"></h2>
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="card shadow-sm border-primary custom-card">
					<h6 class="card-title text-uppercase bg-primary text-warning p-2 p fw-bold rounded-top">
						<i class="fa-solid fa-face-dizzy"></i> Weakest Pokemon
					</h6>
					<div class="card-body">
						<img th:if="${weakestPokemonPicture != null}" th:src="@{'/uploads/' + ${weakestPokemonPicture}}" alt="Pokemon Image"  style="max-height: 150px;">
						<h2 class="text-warning fw-bold" th:text="${weakestPokemonName}"></h2>
					</div>
				</div>
			</div>
		</div>

		
		<div class="d-flex justify-content-center align-items-center">
			<img src="/ball.png" alt="Pokeball" width="6%" class=" me-4">
			<img src="/pokemon_logo.png" alt="Pokemon Logo" width="30%" class="">
			<img src="/pikachu.png" alt="Pikachu" width="10%">
		</div>

		<!-- Pokemon Table -->
		<div class="card shadow-sm">
			<div class="card-header d-flex justify-content-between align-items-center">
				<h3 class="mb-0 text-center flex-grow-1">Pokemon List</h3>
				<a href="#datatable" class="btn btn-primary ms-2"> Latest Additions</a>
				<a th:href="@{/add-pokemon-form}" class="btn btn-primary ms-2"><i class="fa-solid fa-circle-plus"></i> Add Pokemon</a>
			</div>
			<div class="card-body p-0">
				<div class="table-responsive">
					<table class="table table-striped table-hover align-middle mb-0">
						<thead>
							<tr>
								<th>#</th>
								<th>Name</th>
								<th>Type <i class="fa-solid fa-fire-flame-curved"></i></th>
								<th>Combat Power</th>
								<th>Operations</th>

							</tr>
						</thead>
						<tbody>
							<tr th:each="pokemon, iterStat : ${pokemonList}">
								<td th:text="${currentPage * pageSize + iterStat.count}"></td>
								<td th:text="${pokemon.name}"></td>
								<td th:text="${pokemon.type}"></td>
								<td th:text="${pokemon.combat_power}"></td>
								<td>
									<a th:href="@{/api/pokemon-view/{id}(id=${pokemon.id})}" class="btn btn-primary">
										<i class="fa-solid fa-eye"></i>
									</a>
									<a th:href="@{/api/pokemon/{id}/edit(id=${pokemon.id})}" class="btn btn-primary">
										<i class="fa-solid fa-pen-to-square"></i>
									</a>
									<a th:href="@{/api/pokemon/{id}/confirm-delete(id=${pokemon.id})}" class="btn btn-danger">
										<i class="fa-solid fa-trash"></i>
									</a>
								</td>
							</tr>
							<tr th:if="${#lists.isEmpty(pokemonList)}">
								<td colspan="3" class="text-center text-muted">No Pokemon found.</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>

		<!-- Pagination controls -->
		<div class="d-flex justify-content-center mt-3">
			<nav aria-label="Pokemon pagination" th:if="${totalPages > 0}">
				<ul class="pagination">
					<!-- Previous button -->
					<li class="page-item" th:class="${currentPage == 0} ? 'page-item disabled' : 'page-item'">
						<a class="page-link" th:href="@{/api/pokemon-table(page=${currentPage - 1})}"
							aria-label="Previous">
							<span aria-hidden="true">&laquo;</span>
						</a>
					</li>

					<!-- Page numbers -->
					<li class="page-item" th:each="pageNumber : ${#numbers.sequence(0, totalPages - 1)}"
						th:class="${pageNumber == currentPage} ? 'page-item active' : 'page-item'">
						<a class="page-link" th:href="@{/api/pokemon-table(page=${pageNumber})}"
							th:text="${pageNumber + 1}"></a>
					</li>

					<!-- Next button -->
					<li class="page-item"
						th:class="${currentPage == totalPages - 1} ? 'page-item disabled' : 'page-item'">
						<a class="page-link" th:href="@{/api/pokemon-table(page=${currentPage + 1})}" aria-label="Next">
							<span aria-hidden="true">&raquo;</span>
						</a>
					</li>
				</ul>
			</nav>
		</div><br><br><br><br>
		
		
		<!-- 9 Cards in 3x3 Grid -->
		 <div   id="datatable">
		<h3 class="title text-uppercase bg-primary text-warning p-2 fw-bold rounded text-center">
			<span>Latest Additions</span>
		</h3>
		</div>
		<div class="row mt-4 mb-4">
			<!-- Display latest 9 additions -->
			<div th:each="pokemon, iterStat : ${latestAdditions}" class="col-md-4 mb-3">
				<div class="card shadow-sm border-primary custom-card">
					<h6 class="card-title text-uppercase bg-primary text-warning p-2 fw-bold rounded-top">
						<span th:text="${pokemon.type + ' Type'}">Type</span>
					</h6>
					<div class="card-body">
						<div class="d-flex justify-content-center align-items-center">
							<h5><span class="badge bg-primary" th:text="${'CP: ' + pokemon.combat_power}">CP</span></h5>
						</div>
						<img th:if="${pokemon.picturePath != null}" 
							th:src="@{'/uploads/' + ${pokemon.picturePath}}" 
							th:alt="${pokemon.name}" 
							style="max-height: 150px; margin: 10px auto; display: block;">
						<img th:unless="${pokemon.picturePath != null}" 
							src="/pokeball.png" 
							th:alt="${pokemon.name}" 
							style="max-height: 150px; margin: 10px auto; display: block;">
						<h2 class="text-warning fw-bold text-center" th:text="${pokemon.name}">Pokemon Name</h2>
					</div>
				</div>
			</div>
			
			<!-- Fallback if there are fewer than 9 Pokemon -->
			<div th:if="${latestAdditions.size() < 9}" th:each="i : ${#numbers.sequence(latestAdditions.size(), 8)}" class="col-md-4 mb-3">
				<div class="card shadow-sm border-primary custom-card">
					<h6 class="card-title text-uppercase bg-primary text-warning p-2 fw-bold rounded-top">
						<i class="fa-solid fa-plus"></i> Add New
					</h6>
					<div class="card-body text-center">
						<img src="/pokeball.png" alt="Add Pokemon" style="max-height: 150px; opacity: 0.7;">
						<h2 class="text-warning fw-bold">Add Pokemon</h2>
						<a th:href="@{/add-pokemon-form}" class="btn btn-primary mt-2">
							<i class="fa-solid fa-plus"></i> Add New
						</a>
					</div>
				</div>
			</div>
		</div>

	</main>


</body>

<script src="/js/project.js"></script>

</html>